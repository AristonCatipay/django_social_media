{%extends 'core/base.html'%}
{% block title %}{{ title }}{% endblock %}
{% block content %}
<div class="container flex justify-center mb-10">
	<div class="w-full max-w-lg p-8 bg-white border border-violet-200 rounded-lg shadow sm:p-6 md:p-8 hover:bg-violet-100 dark:bg-violet-800 dark:border-violet-700 dark:hover:bg-violet-700">
		<div class="p-3">
            <div class="flex items-center justify-between mb-2">
                <a href="#">
                    <img class="w-40 h-40 rounded-full object-cover" src="{{ searched_user.profile.profile_image.url }}" alt="Jese Leos">
                </a>
                <div>
                    <a href="{% url 'messenger:add_message_or_redirect_to_messages'  searched_user.id %}" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-xs px-3 py-1.5 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800">Message</a>
                </div>
            </div>
            <p class="text-base font-semibold leading-none text-gray-900 dark:text-white">
                <a href="#">{{ searched_user.first_name }} {{ searched_user.last_name }}</a>
            </p>
            <p class="mb-3 text-sm font-normal dark:text-white">
                <a href="#" class="hover:underline">@{{ searched_user.username }}</a>
            </p>
            <div class="flex flex-row">
                <svg class="w-4 h-4 mt-0.5 mr-1 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 2-8.4 7.05a1 1 0 0 1-1.2 0L1 2m18 0a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1m18 0v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2"/>
                </svg>
                <p class="mb-4 text-sm dark:text-white">{{ searched_user.email }}</p>
            </div>
			<div class="flex">
                <p class="mb-4 text-sm dark:text-white">{{ searched_user.profile.bio }}</p>
            </div>
            <ul class="flex text-sm">
				<li class="mr-2">
                    <a href="#" class="hover:underline">
                        <div class="flex flex-row space-x-1">
                            <svg class="w-4 h-4 mt-0.5 mr-1 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 18">
								<path fill="currentColor" d="M13 5.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0ZM7.565 7.423 4.5 14h11.518l-2.516-3.71L11 13 7.565 7.423Z"/>
								<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 1H2a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1Z"/>
								<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0ZM7.565 7.423 4.5 14h11.518l-2.516-3.71L11 13 7.565 7.423Z"/>
							  </svg>
                            <span class="font-semibold text-gray-900 dark:text-white">{{ user_posts_length }}</span>
							{% if user_posts_length == 0 or user_posts_length == 1 %}
							<span class="text-gray-900 dark:text-white">Post</span>
							{% else %}
							<span class="text-gray-900 dark:text-white">Posts</span>
							{% endif %}
                        </div>
                    </a>
                </li>
                <li class="mr-2">
                    <a href="#" class="hover:underline">
                        <div class="flex flex-row space-x-1">
                            <svg class="w-4 h-4 mt-0.5 mr-1 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 18">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 3a3 3 0 1 1-1.614 5.53M15 12a4 4 0 0 1 4 4v1h-3.348M10 4.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0ZM5 11h3a4 4 0 0 1 4 4v2H1v-2a4 4 0 0 1 4-4Z"/>
                            </svg>
                            <span class="font-semibold text-gray-900 dark:text-white">{{ user_following }}</span>
                            <span class="text-gray-900 dark:text-white">Following</span>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#" class="hover:underline">
                        <div class="flex flex-row space-x-1">
                            <svg class="w-4 h-4 mt-0.5 mr-1 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.333 6.764a3 3 0 1 1 3.141-5.023M2.5 16H1v-2a4 4 0 0 1 4-4m7.379-8.121a3 3 0 1 1 2.976 5M15 10a4 4 0 0 1 4 4v2h-1.761M13 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm-4 6h2a4 4 0 0 1 4 4v2H5v-2a4 4 0 0 1 4-4Z"/>
                            </svg>
							<span class="font-semibold text-gray-900 dark:text-white">{{ user_followers }}</span>
							{% if user_followers == 0 or user_followers == 1%}
							<span class="text-gray-900 dark:text-white">Follower</span>
							{% else %}
							<span class="text-gray-900 dark:text-white">Followers</span>
							{% endif %}
                        </div>
                    </a>
                </li>
            </ul>
        </div>		
		<div class="mb-4 border-b border-gray-200 dark:border-gray-700">
			<ul class="flex flex-wrap -mb-px text-sm font-medium text-center" id="myTab" data-tabs-toggle="#myTabContent" role="tablist">
				<li class="mr-2" role="presentation">
					<button class="inline-flex items-center justify-center p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300 group" id="following-tab" data-tabs-target="#following" type="button" role="tab" aria-controls="following" aria-selected="false">
						<svg class="w-4 h-4 mr-2 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 18">
							<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 3a3 3 0 1 1-1.614 5.53M15 12a4 4 0 0 1 4 4v1h-3.348M10 4.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0ZM5 11h3a4 4 0 0 1 4 4v2H1v-2a4 4 0 0 1 4-4Z"/>
						</svg>Following
					</button>
				</li>
				<li class="mr-2" role="presentation">
					<button class="inline-flex items-center justify-center p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300 group" id="follower-tab" data-tabs-target="#follower" type="button" role="tab" aria-controls="follower" aria-selected="false">
						<svg class="w-4 h-4 mr-2 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
							<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.333 6.764a3 3 0 1 1 3.141-5.023M2.5 16H1v-2a4 4 0 0 1 4-4m7.379-8.121a3 3 0 1 1 2.976 5M15 10a4 4 0 0 1 4 4v2h-1.761M13 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm-4 6h2a4 4 0 0 1 4 4v2H5v-2a4 4 0 0 1 4-4Z"/>
						</svg>Followers
					</button>
				</li>
				{% if searched_user.username == request.user.username %}
				<li class="mr-2" role="presentation">
					<button class="inline-flex items-center justify-center p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300 group" id="account-settings-tab" data-tabs-target="#account-settings" type="button" role="tab" aria-controls="account-settings" aria-selected="false">
						<svg class="w-4 h-4 mr-2 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
							<g stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
							  <path d="M19 11V9a1 1 0 0 0-1-1h-.757l-.707-1.707.535-.536a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0l-.536.535L12 2.757V2a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v.757l-1.707.707-.536-.535a1 1 0 0 0-1.414 0L2.929 4.343a1 1 0 0 0 0 1.414l.536.536L2.757 8H2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h.757l.707 1.707-.535.536a1 1 0 0 0 0 1.414l1.414 1.414a1 1 0 0 0 1.414 0l.536-.535L8 17.243V18a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-.757l1.707-.708.536.536a1 1 0 0 0 1.414 0l1.414-1.414a1 1 0 0 0 0-1.414l-.535-.536.707-1.707H18a1 1 0 0 0 1-1Z"/>
							  <path d="M10 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/>
							</g>
						</svg>Settings
					</button>
				</li>
				{% endif %}
			</ul>
		</div>
		<div id="myTabContent">
			<div class="hidden p-2 rounded-lg border-violet-200 dark:border-violet-700 hover:bg-violet-100 dark:bg-violet-700 dark:hover:bg-violet-800" id="following" role="tabpanel" aria-labelledby="following-tab">
				<ul>
					{% for user in following %}	
						<li class="block px-4 py-2 text-sm text-gray-700 rounded-md hover:bg-violet-100 dark:hover:bg-violet-500 dark:text-gray-200 dark:hover:text-white">@{{ user.leader.username }}</li>	
					{% endfor %}
				</ul>
			</div>
			<div class="hidden p-2 rounded-lg border-violet-200 dark:border-violet-700 hover:bg-violet-100 dark:bg-violet-700 dark:hover:bg-violet-800" id="follower" role="tabpanel" aria-labelledby="follower-tab">
				<ul>
					{% for user in followers %}
						<li class="block px-4 py-2 text-sm text-gray-700 rounded-md hover:bg-violet-100 dark:hover:bg-violet-500 dark:text-gray-200 dark:hover:text-white">@{{ user.follower.username }}</li>	
					{% endfor %}
				</ul>
			</div>
			{% if searched_user.username == request.user.username %}
			<div class="hidden p-2 rounded-lg border-violet-200 dark:border-violet-700 hover:bg-violet-100 dark:bg-violet-700 dark:hover:bg-violet-800" id="account-settings" role="tabpanel" aria-labelledby="account-settings-tab">
				<ul aria-labelledby="dropdownButton">
					<li class="block px-4 py-2 text-sm text-gray-700 rounded-md hover:bg-violet-100 dark:hover:bg-violet-500 dark:text-gray-200 dark:hover:text-white">
						<a href="{% url 'user_profile:update_profile' %}">
							<div class="inline-flex items-center justify-center group">
								<svg class="w-4 h-4 mr-2 text-gray-800 dark:text-white" aria-hidden="true" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
									<path d="M6.5 8C5.80777 8 5.13108 7.79473 4.55551 7.41015C3.97993 7.02556 3.53133 6.47893 3.26642 5.83939C3.00152 5.19985 2.9322 4.49612 3.06725 3.81719C3.2023 3.13825 3.53564 2.51461 4.02513 2.02513C4.51461 1.53564 5.13825 1.2023 5.81719 1.06725C6.49612 0.932205 7.19985 1.00152 7.83939 1.26642C8.47893 1.53133 9.02556 1.97993 9.41015 2.55551C9.79473 3.13108 10 3.80777 10 4.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
									<path d="M6.5 17H1V15C1 13.9391 1.42143 12.9217 2.17157 12.1716C2.92172 11.4214 3.93913 11 5 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
									<path d="M19.5 11H18.38C18.2672 10.5081 18.0714 10.0391 17.801 9.613L18.601 8.818C18.6947 8.72424 18.7474 8.59708 18.7474 8.4645C18.7474 8.33192 18.6947 8.20476 18.601 8.111L17.894 7.404C17.8002 7.31026 17.6731 7.25761 17.5405 7.25761C17.4079 7.25761 17.2808 7.31026 17.187 7.404L16.392 8.204C15.9647 7.93136 15.4939 7.73384 15 7.62V6.5C15 6.36739 14.9473 6.24021 14.8536 6.14645C14.7598 6.05268 14.6326 6 14.5 6H13.5C13.3674 6 13.2402 6.05268 13.1464 6.14645C13.0527 6.24021 13 6.36739 13 6.5V7.62C12.5081 7.73283 12.0391 7.92863 11.613 8.199L10.818 7.404C10.7242 7.31026 10.5971 7.25761 10.4645 7.25761C10.3319 7.25761 10.2048 7.31026 10.111 7.404L9.404 8.111C9.31026 8.20476 9.25761 8.33192 9.25761 8.4645C9.25761 8.59708 9.31026 8.72424 9.404 8.818L10.204 9.618C9.9324 10.0422 9.73492 10.5096 9.62 11H8.5C8.36739 11 8.24021 11.0527 8.14645 11.1464C8.05268 11.2402 8 11.3674 8 11.5V12.5C8 12.6326 8.05268 12.7598 8.14645 12.8536C8.24021 12.9473 8.36739 13 8.5 13H9.62C9.73283 13.4919 9.92863 13.9609 10.199 14.387L9.404 15.182C9.31026 15.2758 9.25761 15.4029 9.25761 15.5355C9.25761 15.6681 9.31026 15.7952 9.404 15.889L10.111 16.596C10.2048 16.6897 10.3319 16.7424 10.4645 16.7424C10.5971 16.7424 10.7242 16.6897 10.818 16.596L11.618 15.796C12.0422 16.0676 12.5096 16.2651 13 16.38V17.5C13 17.6326 13.0527 17.7598 13.1464 17.8536C13.2402 17.9473 13.3674 18 13.5 18H14.5C14.6326 18 14.7598 17.9473 14.8536 17.8536C14.9473 17.7598 15 17.6326 15 17.5V16.38C15.4919 16.2672 15.9609 16.0714 16.387 15.801L17.182 16.601C17.2758 16.6947 17.4029 16.7474 17.5355 16.7474C17.6681 16.7474 17.7952 16.6947 17.889 16.601L18.596 15.894C18.6897 15.8002 18.7424 15.6731 18.7424 15.5405C18.7424 15.4079 18.6897 15.2808 18.596 15.187L17.796 14.392C18.0686 13.9647 18.2662 13.4939 18.38 13H19.5C19.6326 13 19.7598 12.9473 19.8536 12.8536C19.9473 12.7598 20 12.6326 20 12.5V11.5C20 11.3674 19.9473 11.2402 19.8536 11.1464C19.7598 11.0527 19.6326 11 19.5 11ZM14 14.5C13.5055 14.5 13.0222 14.3534 12.6111 14.0787C12.2 13.804 11.8795 13.4135 11.6903 12.9567C11.5011 12.4999 11.4516 11.9972 11.548 11.5123C11.6445 11.0273 11.8826 10.5819 12.2322 10.2322C12.5819 9.8826 13.0273 9.6445 13.5123 9.54804C13.9972 9.45157 14.4999 9.50108 14.9567 9.6903C15.4135 9.87952 15.804 10.2 16.0787 10.6111C16.3534 11.0222 16.5 11.5055 16.5 12C16.5 12.663 16.2366 13.2989 15.7678 13.7678C15.2989 14.2366 14.663 14.5 14 14.5Z" fill="currentColor"/>
								</svg>Account Settings
							</div>
						</a>
					</li>
					<li class="block px-4 py-2 text-sm text-gray-700 rounded-md hover:bg-violet-100 dark:hover:bg-violet-500 dark:text-gray-200 dark:hover:text-white">
						<a href="{% url 'change_password' %}">
							<div class="inline-flex items-center justify-center group">
								<svg class="w-4 h-4 mr-2 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 20">
									<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.5 8V4.5a3.5 3.5 0 1 0-7 0V8M8 12v3M2 8h12a1 1 0 0 1 1 1v9a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1Z"/>
								</svg>Change Password
							</div>
						</a>
					</li>
				</ul>
			</div>
			{% endif %}
		</div>
		
		{% if searched_user.username != user.username %}
		<div class="flex flex-col items-center pb-10">
			<div class="flex mt-4 space-x-3 md:mt-6">
				<form action="{% url 'follow' %}" method="post">
					{% csrf_token %}
					<input type="hidden" value="{{ user.username }}" name="follower_username">
					<input type="hidden" value="{{ searched_user.username }}" name="leader_username">
					<input type="hidden" value="{{ user.id }}" name="follower_id">
					<input type="hidden" value="{{ searched_user.id }}" name="leader_id">
					<button type="submit" class="w-full text-white bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-pink-300 dark:focus:ring-pink-200 font-medium rounded-lg text-base px-5 py-2.5 text-center mr-2 mb-2">{{ button_text }}</button>
				</form>
			</div>
		</div>
		{% endif %}
	</div>
</div>

<div class="flex justify-center">
    <div class="w-full max-w-lg">
        {% for post in posts %}
        <div class="bg-white my-2 border border-violet-200 rounded-lg shadow dark:bg-violet-800 dark:border-violet-700">
            <!-- post header start -->
            <div class="flex justify-between items-center px-4 py-3">
                <div class="flex flex-1 items-center space-x-4">
                    <a href="#">
                        <div class="bg-gradient-to-tr from-yellow-600 to-pink-600 p-0.5 rounded-full">  
                            <img src="{{ post.profile.profile_image.url }}" class="bg-gray-200 border border-white rounded-full w-8 h-8 object-cover">
                        </div>
                    </a>
                    <span class="block capitalize font-semibold dark:text-white">
                        <a href="#">
                            {{ post.user_id.first_name }} {{ post.user_id.last_name }}
                        </a>
                    </span>
                </div>
            </div>
            <!-- post header end -->
            <!-- post image start -->
            <div class="grid grid-cols-1 justify-items-center">
                <a href="{{ post.image.url }}">  
                    <img src="{{ post.image.url }}" class="w-96 h-96 object-cover">
                </a>
            </div>
            <!-- post image end -->
            <div class="p-3 border-b text-gray-500 dark:text-gray-400 font-normal">
                <h1 class="block font-semibold dark:text-white">
                    <a href="#">
                        @{{ post.user }}
                    </a>
                </h1> 
                <h1 class="block dark:text-gray-300">{{ post.caption }}</h1>
            </div>
            
            <div class="py-3 px-4 space-y-3"> 
                <div class="flex space-x-4 lg:font-bold">
                    <a href="/like-post?post_id={{ post.id }}" class="flex items-center space-x-2">
                        <div class="p-2 rounded-full text-black">
                            {% if post.no_of_likes == 0 %}
                            <!-- Not clicked -->
                            <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 21 19">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4C5.5-1.5-1.5 5.5 4 11l7 7 7-7c5.458-5.458-1.542-12.458-7-7Z"/>
                              </svg>
                            {% else %}
                            <!-- Clicked -->
                            <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 18">
                                <path d="M17.947 2.053a5.209 5.209 0 0 0-3.793-1.53A6.414 6.414 0 0 0 10 2.311 6.482 6.482 0 0 0 5.824.5a5.2 5.2 0 0 0-3.8 1.521c-1.915 1.916-2.315 5.392.625 8.333l7 7a.5.5 0 0 0 .708 0l7-7a6.6 6.6 0 0 0 2.123-4.508 5.179 5.179 0 0 0-1.533-3.793Z"/>
                              </svg>
                            {% endif %}
                        </div>   
                    </a>
                    <a href="{{ post.image.url }}" class="flex items-center space-x-2 flex-1 justify-end" download>
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 15">
                            <path d="M1 13a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6H1v7Zm5.293-3.707a1 1 0 0 1 1.414 0L8 9.586V8a1 1 0 0 1 2 0v1.586l.293-.293a1 1 0 0 1 1.414 1.414l-2 2a1 1 0 0 1-1.416 0l-2-2a1 1 0 0 1 .002-1.414ZM17 0H1a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1Z"/>
                        </svg>                            
                    </a>
                </div>
                <div class="flex items-center space-x-3"> 
                    <div class="flex items-center">
                        {% if post.no_of_likes > 0 %}                        
                        <div class="flex -space-x-4">
                            {% for like in like_post %}
                                    {% if like.post_id == post.id %}
                                    <img class="w-8 h-8 border-2 border-white rounded-full dark:border-gray-800 object-cover" src="{{ like.profile.profile_image.url }}" alt="">
                                    {% endif %}
                                    {% endfor %}                              
                                </div> 
                        {% endif %}
                    </div>
                    <div class="dark:text-gray-400 font-normal">
                        {% if post.no_of_likes == 0 %}
                        <h1 class="dark:text-gray-300">No likes</h1>
                        {% elif post.no_of_likes == 1 %}
                        <h1 class="dark:text-gray-300">Liked by {{ post.no_of_likes }} person</h1>
                        {% else %}
                        <h1 class="dark:text-gray-300">Liked by {{ post.no_of_likes }} people</h1>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}